{"version":3,"sources":["events.js"],"names":[],"mappings":"AAAA;;;;;;;;AACA;;;;AACA;;AAIA;;;;AACA;;;;AACA;;;;;;;;;;;;;;;;IAKM;;;;;;;AAIJ,WAJI,SAIJ,GAAc;0BAJV,WAIU;;uEAJV,uBAIU;;AAEZ,UAAK,SAAL,GAAiB,8BAAjB,CAFY;;GAAd;;;;;;;;;;;;eAJI;;0BAiBE,MAAM,SAAS,iBAAiB,UAAU;;;AAC9C,UAAI,CAAC,QAAD,IAAa,wBAAW,eAAX,CAAb,EAA0C;AAC5C,mBAAW,eAAX,CAD4C;AAE5C,0BAAkB,IAAlB,CAF4C;OAA9C;AAIA,UAAI,CAAC,QAAD,IAAa,wBAAW,OAAX,CAAb,EAAkC;AACpC,mBAAW,OAAX,CADoC;AAEpC,kBAAU,EAAV,CAFoC;OAAtC;AAIA,aAAO,mBAAS,OAAT,CACL,kBAAQ,GAAR,GAAc,IAAd,CAAmB,UAAC,OAAD,EAAa;AAC9B,eAAO,OAAK,SAAL,CAAe,KAAf,CAAqB,OAArB,EAA8B,IAA9B,EAAoC,OAApC,EAA6C,eAA7C,CAAP,CAD8B;OAAb,CADd,EAIL,OAJK,CAIG,QAJH,CAAP,CAT8C;;;;SAjB5C;;;kBAkCS","file":"events.js","sourcesContent":["'use strict';\nimport Pipeline from '@hoist/events-pipeline';\nimport {\n  isFunction\n}\nfrom 'lodash';\nimport Bluebird from 'bluebird';\nimport BaseAPI from './base_api';\nimport Context from '@hoist/context';\n\n/**\n * Hoists event API\n */\nclass EventsAPI extends BaseAPI {\n  /**\n   * create a new instance of the event api\n   */\n  constructor() {\n    super();\n    this._pipeline = new Pipeline();\n  }\n\n  /**\n   * raise a new event\n   * @param {string} name - the name of the event\n   * @param {object} payload - the event payload\n   * @param {object} [contextOverride] - overides for the current context\n   * @param {function(error: Error, objects: Event)} [callback] - callback to call when event has been raised\n   * @returns {Promise<Event>} - a promise to have raised the Event\n   */\n  raise(name, payload, contextOverride, callback) {\n    if (!callback && isFunction(contextOverride)) {\n      callback = contextOverride;\n      contextOverride = null;\n    }\n    if (!callback && isFunction(payload)) {\n      callback = payload;\n      payload = {};\n    }\n    return Bluebird.resolve(\n      Context.get().then((context) => {\n        return this._pipeline.raise(context, name, payload, contextOverride);\n      })\n    ).nodeify(callback);\n  }\n}\n\nexport default EventsAPI;\n"],"sourceRoot":"/source/"}