{"version":3,"sources":["log.js"],"names":[],"mappings":"AAAA;;;;;;;;kBAUwB;;;;;;;;;;;;;AAAT,SAAS,GAAT,GAAe;;AAE5B,MAAI,OAAO,MAAM,SAAN,CAAgB,KAAhB,CAAsB,IAAtB,CAA2B,SAA3B,CAAP,CAFwB;AAG5B,MAAI,oBAAJ,CAH4B;AAI5B,MAAI,wBAAW,KAAK,KAAK,MAAL,GAAc,CAAd,CAAhB,CAAJ,EAAuC;AACrC,eAAW,KAAK,GAAL,EAAX,CADqC;GAAvC;AAGA,MAAI,MAAM;AACR,UAAM,QAAN;AACA,eAAW,IAAX;GAFE,CAPwB;;AAY5B,MAAI,QAAQ,EAAR,CAZwB;AAa5B,MAAI,UAAU,KAAK,SAAL,CAAe,GAAf,EAAoB,UAAU,GAAV,EAAe,KAAf,EAAsB;AACtD,QAAI,QAAO,qDAAP,KAAiB,QAAjB,IAA6B,UAAU,IAAV,EAAgB;AAC/C,UAAI,MAAM,OAAN,CAAc,KAAd,MAAyB,CAAC,CAAD,EAAI;AAC/B,eAAO,YAAP,CAD+B;OAAjC;;AAD+C,WAK/C,CAAM,IAAN,CAAW,KAAX,EAL+C;KAAjD;AAOA,WAAO,KAAP,CARsD;GAAtB,CAA9B,CAbwB;AAuB5B,UAAQ,IAAR,CAvB4B;AAwB5B,UAAQ,GAAR,CAAY,OAAZ;;;;AAxB4B,SA4BrB,mBAAS,OAAT,CAAiB,IAAjB,EAAuB,OAAvB,CAA+B,QAA/B,CAAP,CA5B4B;CAAf","file":"log.js","sourcesContent":["'use strict';\nimport Bluebird from 'bluebird';\nimport {\n  isFunction\n}\nfrom 'lodash';\n\n/**\n * log out the object to be captured by the executor process\n */\nexport default function Log() {\n\n  let args = Array.prototype.slice.call(arguments);\n  let callback;\n  if (isFunction(args[args.length - 1])) {\n    callback = args.pop();\n  }\n  let log = {\n    type: 'appLog',\n    arguments: args\n  };\n\n  let cache = [];\n  let message = JSON.stringify(log, function (key, value) {\n    if (typeof value === 'object' && value !== null) {\n      if (cache.indexOf(value) !== -1) {\n        return '[Circular]';\n      }\n      // Store value in our collection\n      cache.push(value);\n    }\n    return value;\n  });\n  cache = null;\n  console.log(message);\n\n  //return promise for backwards compatibility\n\n  return Bluebird.resolve(null).nodeify(callback);\n}\n"],"sourceRoot":"/source/"}