{"version":3,"sources":["log.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;qBAUW,GAAG;;;;wBATN,UAAU;;;;sBAI1B,QAAQ;;;;;;AAKE,SAAS,GAAG,GAAG;;AAE5B,MAAI,IAAI,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AACjD,MAAI,QAAQ,YAAA,CAAC;AACb,MAAI,wBAAW,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,EAAE;AACrC,YAAQ,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;GACvB;AACD,MAAI,GAAG,GAAG;AACR,QAAI,EAAE,QAAQ;AACd,aAAS,EAAE,IAAI;GAChB,CAAC;;AAEF,MAAI,KAAK,GAAG,EAAE,CAAC;AACf,MAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,UAAU,GAAG,EAAE,KAAK,EAAE;AACtD,QAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,KAAK,KAAK,IAAI,EAAE;AAC/C,UAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE;AAC/B,eAAO,YAAY,CAAC;OACrB;;AAED,WAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACnB;AACD,WAAO,KAAK,CAAC;GACd,CAAC,CAAC;AACH,OAAK,GAAG,IAAI,CAAC;AACb,SAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;;;;AAIrB,SAAO,sBAAS,OAAO,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;CACjD","file":"log.js","sourcesContent":["'use strict';\nimport Bluebird from 'bluebird';\nimport {\n  isFunction\n}\nfrom 'lodash';\n\n/**\n * log out the object to be captured by the executor process\n */\nexport default function Log() {\n\n  let args = Array.prototype.slice.call(arguments);\n  let callback;\n  if (isFunction(args[args.length - 1])) {\n    callback = args.pop();\n  }\n  let log = {\n    type: 'appLog',\n    arguments: args\n  };\n\n  let cache = [];\n  let message = JSON.stringify(log, function (key, value) {\n    if (typeof value === 'object' && value !== null) {\n      if (cache.indexOf(value) !== -1) {\n        return '[Circular]';\n      }\n      // Store value in our collection\n      cache.push(value);\n    }\n    return value;\n  });\n  cache = null;\n  console.log(message);\n\n  //return promise for backwards compatibility\n\n  return Bluebird.resolve(null).nodeify(callback);\n}\n"],"sourceRoot":"/source/"}